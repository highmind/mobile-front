(function($){$.extend($,{throttle:function(delay,fn,debounce_mode){var last=0,timeId;if(typeof fn!=="function"){debounce_mode=fn;fn=delay;delay=250}function wrapper(){var that=this,period=Date.now()-last,args=arguments;function exec(){last=Date.now();fn.apply(that,args)}function clear(){timeId=undefined}if(debounce_mode&&!timeId){exec()}timeId&&clearTimeout(timeId);if(debounce_mode===undefined&&period>delay){exec()}else{timeId=setTimeout(debounce_mode?clear:exec,debounce_mode===undefined?delay-period:delay)}}wrapper._zid=fn._zid=fn._zid||$.proxy(fn)._zid;return wrapper},debounce:function(delay,fn,t){return fn===undefined?$.throttle(250,delay,false):$.throttle(delay,fn,t===undefined?false:t!==false)}})})(Zepto);(function($,win){function registerScrollStop(){$(win).on("scroll",$.debounce(80,function(){$(win).trigger("scrollStop")},false))}function backEventOffHandler(){$(win).off("scroll");registerScrollStop()}registerScrollStop();$(win).on("pageshow",function(e){e.persisted&&$(win).off("touchstart",backEventOffHandler).one("touchstart",backEventOffHandler)})})(Zepto,window);$(function(){$.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"};$.matchMedia($.mediaQuery.ortchange).addListener(function(){$(window).trigger("ortchange")})});(function($){$.matchMedia=(function(){var mediaId=0,cls="gmu-media-detect",transitionEnd=$.fx.transitionEnd,cssPrefix=$.fx.cssPrefix,$style=$("<style></style>").append("."+cls+"{"+cssPrefix+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(query){var id=cls+mediaId++,$mediaElem,listeners=[],ret;$style.append("@media "+query+" { #"+id+" { width: 1px; } }\n");$mediaElem=$('<div class="'+cls+'" id="'+id+'"></div>').appendTo("body").on(transitionEnd,function(){ret.matches=$mediaElem.width()===1;$.each(listeners,function(i,fn){$.isFunction(fn)&&fn.call(ret,ret)})});ret={matches:$mediaElem.width()===1,media:query,addListener:function(callback){listeners.push(callback);return this},removeListener:function(callback){var index=listeners.indexOf(callback);~index&&listeners.splice(index,1);return this}};return ret}}())})(Zepto);(function($){var pedding=[];$.fn.imglazyload=function(opts){var splice=Array.prototype.splice,opts=$.extend({threshold:0,container:window,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:false,isVertical:true},opts),$viewPort=$(opts.container),isVertical=opts.isVertical,isWindow=$.isWindow($viewPort.get(0)),OFFSET={win:[isVertical?"scrollY":"scrollX",isVertical?"innerHeight":"innerWidth"],img:[isVertical?"top":"left",isVertical?"height":"width"]},$plsHolder=$(opts.placeHolder).length?$(opts.placeHolder):null,isImg=$(this).is("img");!isWindow&&(OFFSET["win"]=OFFSET["img"]);function isInViewport(offset){var viewOffset=isWindow?window:$viewPort.offset(),viewTop=viewOffset[OFFSET.win[0]],viewHeight=viewOffset[OFFSET.win[1]];return viewTop>=offset[OFFSET.img[0]]-opts.threshold-viewHeight&&viewTop<=offset[OFFSET.img[0]]+offset[OFFSET.img[1]]}pedding=Array.prototype.slice.call($(pedding.reverse()).add(this),0).reverse();if($.isFunction($.fn.imglazyload.detect)){_addPlsHolder();return this}function _load(div){var $div=$(div),attrObj={},$img=$div;if(!isImg){$.each($div.get(0).attributes,function(){~this.name.indexOf("data-")&&(attrObj[this.name]=this.value)});$img=$("<img />").attr(attrObj)}$div.trigger("startload");$img.on("load",function(){!isImg&&$div.replaceWith($img);$div.trigger("loadcomplete");$img.off("load")}).on("error",function(){var errorEvent=$.Event("error");$div.trigger(errorEvent);errorEvent.defaultPrevented||pedding.push(div);$img.off("error").remove()}).attr("src",$div.attr(opts.urlName))}function _detect(){var i,$image,offset,div;for(i=pedding.length;i--;){$image=$(div=pedding[i]);offset=$image.offset();isInViewport(offset)&&(splice.call(pedding,i,1),_load(div))}}function _addPlsHolder(){!isImg&&$plsHolder&&$(pedding).append($plsHolder)}$(document).ready(function(){_addPlsHolder();_detect()});!opts.innerScroll&&$(window).on(opts.eventName+" ortchange",function(){_detect()});$.fn.imglazyload.detect=_detect;return this}})(Zepto);